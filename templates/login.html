<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<style>
	@import url('https://fonts.googleapis.com/css?family=Montserrat:400,800');

	* {
		box-sizing: border-box;
	}

	body {
		background: #f6f5f7;
		display: flex;
		justify-content: center;
		align-items: center;
		flex-direction: column;
		font-family: 'Montserrat', sans-serif;
		height: 100vh;
		margin: -20px 0 50px;
	}

	h1 {
		font-weight: bold;
		margin: 0;
	}

	h2 {
		text-align: center;
	}

	p {
		font-size: 14px;
		font-weight: 100;
		line-height: 20px;
		letter-spacing: 0.5px;
		margin: 20px 0 30px;
	}

	span {
		font-size: 12px;
	}

	a {
		color: #333;
		font-size: 14px;
		text-decoration: none;
		margin: 15px 0;
	}

	button {
		border-radius: 20px;
		border: 1px solid #FF4B2B;
		background-color: #FF4B2B;
		color: #FFFFFF;
		font-size: 12px;
		font-weight: bold;
		padding: 12px 45px;
		letter-spacing: 1px;
		text-transform: uppercase;
		transition: transform 80ms ease-in;
	}

	button:active {
		transform: scale(0.95);
	}

	button:focus {
		outline: none;
	}

	button.ghost {
		background-color: transparent;
		border-color: #FFFFFF;
	}

	form {
		background-color: #FFFFFF;
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		padding: 0 50px;
		height: 100%;
		text-align: center;
	}

	input {
		background-color: #eee;
		border: none;
		padding: 12px 15px;
		margin: 8px 0;
		width: 100%;
	}

	.container {
		background-color: #fff;
		border-radius: 10px;
		box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25),
			0 10px 10px rgba(0, 0, 0, 0.22);
		position: relative;
		overflow: hidden;
		width: 768px;
		max-width: 100%;
		min-height: 480px;
	}

	.form-container {
		position: absolute;
		top: 0;
		height: 100%;
		transition: all 0.6s ease-in-out;
	}

	.sign-in-container {
		left: 0;
		width: 50%;
		z-index: 2;
	}

	.container.right-panel-active .sign-in-container {
		transform: translateX(100%);
	}

	.sign-up-container {
		left: 0;
		width: 50%;
		opacity: 0;
		z-index: 1;
	}

	.container.right-panel-active .sign-up-container {
		transform: translateX(100%);
		opacity: 1;
		z-index: 5;
		animation: show 0.6s;
	}

	@keyframes show {

		0%,
		49.99% {
			opacity: 0;
			z-index: 1;
		}

		50%,
		100% {
			opacity: 1;
			z-index: 5;
		}
	}

	.overlay-container {
		position: absolute;
		top: 0;
		left: 50%;
		width: 50%;
		height: 100%;
		overflow: hidden;
		transition: transform 0.6s ease-in-out;
		z-index: 100;
	}

	.container.right-panel-active .overlay-container {
		transform: translateX(-100%);
	}

	.overlay {
		background: #FF416C;
		background: -webkit-linear-gradient(to right, #FF4B2B, #FF416C);
		background: linear-gradient(to right, #FF4B2B, #FF416C);
		background-repeat: no-repeat;
		background-size: cover;
		background-position: 0 0;
		color: #FFFFFF;
		position: relative;
		left: -100%;
		height: 100%;
		width: 200%;
		transform: translateX(0);
		transition: transform 0.6s ease-in-out;
	}

	.container.right-panel-active .overlay {
		transform: translateX(50%);
	}

	.overlay-panel {
		position: absolute;
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		padding: 0 40px;
		text-align: center;
		top: 0;
		height: 100%;
		width: 50%;
		transform: translateX(0);
		transition: transform 0.6s ease-in-out;
	}

	.overlay-left {
		transform: translateX(-20%);
	}

	.container.right-panel-active .overlay-left {
		transform: translateX(0);
	}

	.overlay-right {
		right: 0;
		transform: translateX(0);
	}

	.container.right-panel-active .overlay-right {
		transform: translateX(20%);
	}

	.social-container {
		margin: 20px 0;
	}

	.social-container a {
		border: 1px solid #DDDDDD;
		border-radius: 50%;
		display: inline-flex;
		justify-content: center;
		align-items: center;
		margin: 0 5px;
		height: 40px;
		width: 40px;
	}

	footer {
		background-color: #222;
		color: #fff;
		font-size: 14px;
		bottom: 0;
		position: fixed;
		left: 0;
		right: 0;
		text-align: center;
		z-index: 999;
	}

	footer p {
		margin: 10px 0;
	}

	footer i {
		color: red;
	}

	footer a {
		color: #3c97bf;
		text-decoration: none;
	}

	/* Validation Styles */
	.error-message {
		color: #FF4B2B;
		font-size: 11px;
		margin-top: -5px;
		margin-bottom: 5px;
		text-align: left;
		width: 100%;
		display: none;
		padding-left: 5px;
	}

	.error-message.show {
		display: block;
	}

	input.invalid {
		border: 2px solid #FF4B2B !important;
		background-color: #fff5f5;
	}

	input.valid {
		border: 2px solid #4CAF50 !important;
		background-color: #f0fff4;
	}

	.password-requirements {
		font-size: 11px;
		text-align: left;
		margin: 5px 0;
		color: #666;
		width: 100%;
		padding-left: 5px;
	}

	.password-requirements li {
		list-style: none;
		margin: 3px 0;
	}

	.password-requirements li.met {
		color: #4CAF50;
	}

	.password-requirements li.not-met {
		color: #FF4B2B;
	}

	.password-requirements li::before {
		content: "✗ ";
		margin-right: 5px;
		font-weight: bold;
	}

	.password-requirements li.met::before {
		content: "✓ ";
	}
</style>

<body>
	<div>
		{% include '_flashes.html' %}
		<h2>Sign in/up Form</h2>
		<div class="container" id="container">
			<div class="form-container sign-up-container">
				<form action="{{ url_for('signup') }}" method="post" id="signupForm" novalidate>
					<h1>Create Account</h1>
					<div class="social-container">
						<a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
						<a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
						<a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
					</div>
					<span>or use your email for registration</span>
					<input type="text" name="username" id="signupUsername" placeholder="Name" required minlength="3" />
					<div class="error-message" id="signupUsernameError">Username must be at least 3 characters</div>

					<input type="email" name="email" id="signupEmail" placeholder="Email" required />
					<div class="error-message" id="signupEmailError">Please enter a valid email address</div>

					<input type="password" name="password" id="signupPassword" placeholder="Password" required
						minlength="6" />
					<div class="error-message" id="signupPasswordError">Password must be at least 6 characters</div>
					<ul class="password-requirements" id="passwordRequirements" style="display: none;">
						<li id="req-length" class="not-met">At least 6 characters</li>
						<li id="req-number" class="not-met">Contains a number</li>
						<li id="req-letter" class="not-met">Contains a letter</li>
					</ul>

					<button type="submit">Sign Up</button>
				</form>
			</div>
			<div class="form-container sign-in-container">
				<form action="{{ url_for('login') }}" method="post" id="loginForm" novalidate>
					<h1>Sign in</h1>
					<div class="social-container">
						<a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
						<a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
						<a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
					</div>
					<span>or use your account</span>
					<input type="text" name="email" id="loginEmail" placeholder="Email or Username" required />
					<div class="error-message" id="loginEmailError">Email or Username is required</div>

					<input type="password" name="password" id="loginPassword" placeholder="Password" required
						minlength="6" />
					<div class="error-message" id="loginPasswordError">Password is required</div>

					<button type="submit">Sign In</button>
				</form>
			</div>
			<div class="overlay-container">
				<div class="overlay">
					<div class="overlay-panel overlay-left">
						<h1>Welcome Back!</h1>
						<p>To keep connected with us please login with your personal info</p>
						<button class="ghost" id="signIn">Sign In</button>
					</div>
					<div class="overlay-panel overlay-right">
						<h1>Hello, Friend!</h1>
						<p>Enter your personal details and start journey with us</p>
						<button class="ghost" id="signUp">Sign Up</button>
					</div>
				</div>
			</div>
		</div>


	</div>
</body>
<script>
	const signUpButton = document.getElementById('signUp');
	const signInButton = document.getElementById('signIn');
	const container = document.getElementById('container');

	signUpButton.addEventListener('click', () => {
		container.classList.add("right-panel-active");
	});

	signInButton.addEventListener('click', () => {
		container.classList.remove("right-panel-active");
	});

	// ===== FORM VALIDATION =====

	// Email validation regex (max one subdomain)
	const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$/;

	// Get form elements
	const signupForm = document.getElementById('signupForm');
	const signupUsername = document.getElementById('signupUsername');
	const signupEmail = document.getElementById('signupEmail');
	const signupPassword = document.getElementById('signupPassword');
	const passwordRequirements = document.getElementById('passwordRequirements');

	const loginForm = document.getElementById('loginForm');
	const loginEmail = document.getElementById('loginEmail');
	const loginPassword = document.getElementById('loginPassword');

	// === SIGNUP FORM VALIDATIONS ===

	// Real-time validation for signup username
	if (signupUsername) {
		signupUsername.addEventListener('input', function () {
			const value = this.value.trim();
			const errorDiv = document.getElementById('signupUsernameError');

			if (value.length === 0) {
				this.classList.remove('valid', 'invalid');
				errorDiv.classList.remove('show');
			} else if (value.length < 3) {
				this.classList.add('invalid');
				this.classList.remove('valid');
				errorDiv.textContent = 'Username must be at least 3 characters';
				errorDiv.classList.add('show');
			} else if (!/^[a-zA-Z0-9_]+$/.test(value)) {
				this.classList.add('invalid');
				this.classList.remove('valid');
				errorDiv.textContent = 'Username can only contain letters, numbers, and underscores';
				errorDiv.classList.add('show');
			} else {
				this.classList.add('valid');
				this.classList.remove('invalid');
				errorDiv.classList.remove('show');
			}
		});
	}

	// Real-time validation for signup email
	if (signupEmail) {
		signupEmail.addEventListener('input', function () {
			const value = this.value.trim();
			const errorDiv = document.getElementById('signupEmailError');

			if (value.length === 0) {
				this.classList.remove('valid', 'invalid');
				errorDiv.classList.remove('show');
			} else if (!emailRegex.test(value)) {
				this.classList.add('invalid');
				this.classList.remove('valid');
				errorDiv.textContent = 'Please enter a valid email address';
				errorDiv.classList.add('show');
			} else {
				this.classList.add('valid');
				this.classList.remove('invalid');
				errorDiv.classList.remove('show');
			}
		});
	}

	// Real-time validation for signup password with requirements
	if (signupPassword) {
		signupPassword.addEventListener('focus', function () {
			if (passwordRequirements) {
				passwordRequirements.style.display = 'block';
			}
		});

		signupPassword.addEventListener('input', function () {
			const value = this.value;
			const errorDiv = document.getElementById('signupPasswordError');

			// Check requirements
			const hasLength = value.length >= 6;
			const hasNumber = /\d/.test(value);
			const hasLetter = /[a-zA-Z]/.test(value);

			// Update requirement indicators
			const reqLength = document.getElementById('req-length');
			const reqNumber = document.getElementById('req-number');
			const reqLetter = document.getElementById('req-letter');

			if (reqLength) reqLength.className = hasLength ? 'met' : 'not-met';
			if (reqNumber) reqNumber.className = hasNumber ? 'met' : 'not-met';
			if (reqLetter) reqLetter.className = hasLetter ? 'met' : 'not-met';

			// Update field validation
			if (value.length === 0) {
				this.classList.remove('valid', 'invalid');
				errorDiv.classList.remove('show');
			} else if (hasLength && hasNumber && hasLetter) {
				this.classList.add('valid');
				this.classList.remove('invalid');
				errorDiv.classList.remove('show');
			} else {
				this.classList.add('invalid');
				this.classList.remove('valid');
				if (!hasLength) {
					errorDiv.textContent = 'Password must be at least 6 characters';
				} else if (!hasNumber) {
					errorDiv.textContent = 'Password must contain at least one number';
				} else if (!hasLetter) {
					errorDiv.textContent = 'Password must contain at least one letter';
				}
				errorDiv.classList.add('show');
			}
		});

		signupPassword.addEventListener('blur', function () {
			if (this.value.length === 0 && passwordRequirements) {
				passwordRequirements.style.display = 'none';
			}
		});
	}

	// Signup form submission validation
	if (signupForm) {
		signupForm.addEventListener('submit', function (e) {
			e.preventDefault();

			let isValid = true;

			// Validate username
			const username = signupUsername.value.trim();
			const usernameError = document.getElementById('signupUsernameError');

			if (username.length < 3) {
				signupUsername.classList.add('invalid');
				usernameError.textContent = 'Username must be at least 3 characters';
				usernameError.classList.add('show');
				isValid = false;
			} else if (!/^[a-zA-Z0-9_]+$/.test(username)) {
				signupUsername.classList.add('invalid');
				usernameError.textContent = 'Username can only contain letters, numbers, and underscores';
				usernameError.classList.add('show');
				isValid = false;
			}

			// Validate email
			const email = signupEmail.value.trim();
			const emailError = document.getElementById('signupEmailError');

			if (!emailRegex.test(email)) {
				signupEmail.classList.add('invalid');
				emailError.textContent = 'Please enter a valid email address';
				emailError.classList.add('show');
				isValid = false;
			}

			// Validate password
			const password = signupPassword.value;
			const passwordError = document.getElementById('signupPasswordError');
			const hasLength = password.length >= 6;
			const hasNumber = /\d/.test(password);
			const hasLetter = /[a-zA-Z]/.test(password);

			if (!hasLength || !hasNumber || !hasLetter) {
				signupPassword.classList.add('invalid');
				if (!hasLength) {
					passwordError.textContent = 'Password must be at least 6 characters';
				} else if (!hasNumber) {
					passwordError.textContent = 'Password must contain at least one number';
				} else if (!hasLetter) {
					passwordError.textContent = 'Password must contain at least one letter';
				}
				passwordError.classList.add('show');
				isValid = false;
			}

			if (isValid) {
				this.submit();
			} else {
				// Focus on first error
				const firstError = this.querySelector('.invalid');
				if (firstError) {
					firstError.focus();
				}
			}
		});
	}

	// === LOGIN FORM VALIDATIONS ===

	// Real-time validation for login email/username
	if (loginEmail) {
		loginEmail.addEventListener('input', function () {
			const value = this.value.trim();
			const errorDiv = document.getElementById('loginEmailError');

			if (value.length === 0) {
				this.classList.remove('valid', 'invalid');
				errorDiv.classList.remove('show');
			} else if (value.length < 3) {
				this.classList.add('invalid');
				this.classList.remove('valid');
				errorDiv.textContent = 'Email or Username must be at least 3 characters';
				errorDiv.classList.add('show');
			} else {
				this.classList.add('valid');
				this.classList.remove('invalid');
				errorDiv.classList.remove('show');
			}
		});
	}

	// Real-time validation for login password
	if (loginPassword) {
		loginPassword.addEventListener('input', function () {
			const value = this.value;
			const errorDiv = document.getElementById('loginPasswordError');

			if (value.length === 0) {
				this.classList.remove('valid', 'invalid');
				errorDiv.classList.remove('show');
			} else if (value.length < 6) {
				this.classList.add('invalid');
				this.classList.remove('valid');
				errorDiv.textContent = 'Password must be at least 6 characters';
				errorDiv.classList.add('show');
			} else {
				this.classList.add('valid');
				this.classList.remove('invalid');
				errorDiv.classList.remove('show');
			}
		});
	}

	// Login form submission validation
	if (loginForm) {
		loginForm.addEventListener('submit', function (e) {
			e.preventDefault();

			let isValid = true;

			// Validate email/username
			const emailValue = loginEmail.value.trim();
			const emailError = document.getElementById('loginEmailError');

			if (emailValue.length < 3) {
				loginEmail.classList.add('invalid');
				emailError.textContent = 'Email or Username is required (minimum 3 characters)';
				emailError.classList.add('show');
				isValid = false;
			}

			// Validate password
			const passwordValue = loginPassword.value;
			const passwordError = document.getElementById('loginPasswordError');

			if (passwordValue.length < 6) {
				loginPassword.classList.add('invalid');
				passwordError.textContent = 'Password must be at least 6 characters';
				passwordError.classList.add('show');
				isValid = false;
			}

			if (isValid) {
				this.submit();
			} else {
				// Focus on first error
				const firstError = this.querySelector('.invalid');
				if (firstError) {
					firstError.focus();
				}
			}
		});
	}

	// Clear validation state on focus for all inputs
	const allInputs = [signupUsername, signupEmail, signupPassword, loginEmail, loginPassword];
	allInputs.forEach(input => {
		if (input) {
			input.addEventListener('focus', function () {
				this.classList.remove('invalid');
			});
		}
	});
</script>

</html>